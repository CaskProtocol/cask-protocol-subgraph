specVersion: 0.0.2
description: Cask is a decentralized non-custodial protocol for managing recurring payment agreements.
repository: https://github.com/CaskProtocol/cask-subscriptions-subgraph
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: CaskSubscriptions
    network: {{network}}
    source:
      address: "{{CaskSubscriptions.address}}"
      abi: CaskSubscriptions
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: ./src/mappings/subscriptions.ts
      entities:
        - Subscription
        - Transaction
        - Consumer
        - Provider
        - ProviderPlan
      abis:
        - name: CaskSubscriptions
          file: ./abis/CaskSubscriptions.json
      eventHandlers:
        - event: SubscriptionCanceled(indexed address,indexed address,indexed uint256,bytes32,uint32)
          handler: handleSubscriptionCanceled
        - event: SubscriptionChangedPlan(indexed address,indexed address,indexed uint256,bytes32,uint32,uint32,bytes32)
          handler: handleSubscriptionChangedPlan
        - event: SubscriptionCreated(indexed address,indexed address,indexed uint256,bytes32,uint32,bytes32)
          handler: handleSubscriptionCreated
        - event: SubscriptionPastDue(indexed address,indexed address,indexed uint256,bytes32,uint32)
          handler: handleSubscriptionPastDue
        - event: SubscriptionPaused(indexed address,indexed address,indexed uint256,bytes32,uint32)
          handler: handleSubscriptionPaused
        - event: SubscriptionPendingCancel(indexed address,indexed address,indexed uint256,bytes32,uint32,uint32)
          handler: handleSubscriptionPendingCancel
        - event: SubscriptionPendingChangePlan(indexed address,indexed address,indexed uint256,bytes32,uint32,uint32)
          handler: handleSubscriptionPendingChangePlan
        - event: SubscriptionRenewed(indexed address,indexed address,indexed uint256,bytes32,uint32)
          handler: handleSubscriptionRenewed
        - event: SubscriptionResumed(indexed address,indexed address,indexed uint256,bytes32,uint32)
          handler: handleSubscriptionResumed
        - event: SubscriptionTrialEnded(indexed address,indexed address,indexed uint256,bytes32,uint32)
          handler: handleSubscriptionTrialEnded
